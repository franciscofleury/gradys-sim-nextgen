
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../3_extending/">
      
      
        <link rel="next" href="../Prototype%20Mode/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>RAFT Consensus Plugin Guide - GrADyS-SIM NextGen</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#raft-consensus-plugin-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="GrADyS-SIM NextGen" class="md-header__button md-logo" aria-label="GrADyS-SIM NextGen" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            GrADyS-SIM NextGen
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              RAFT Consensus Plugin Guide
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Project-GrADyS/gradys-sim-nextgen" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="GrADyS-SIM NextGen" class="md-nav__button md-logo" aria-label="GrADyS-SIM NextGen" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    GrADyS-SIM NextGen
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Project-GrADyS/gradys-sim-nextgen" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../framework/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    What's included?
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Getting%20Started/execution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Execution Modes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Getting%20Started/setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick Setup
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1_creating/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creating a protocol
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2_simple/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Simulating a data collection scenario
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../3_extending/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extending the Simulation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    RAFT Consensus Plugin Guide
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    RAFT Consensus Plugin Guide
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#key-capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      Key Capabilities
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Start
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quick Start">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-usage-with-failure-detection" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Usage with Failure Detection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dispatcher-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Dispatcher Integration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architecture Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#component-relationships" class="md-nav__link">
    <span class="md-ellipsis">
      Component Relationships
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Message Flow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-innovations" class="md-nav__link">
    <span class="md-ellipsis">
      Key Innovations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key Innovations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-active-node-discovery-system" class="md-nav__link">
    <span class="md-ellipsis">
      1. Active Node Discovery System
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-massive-failure-recovery" class="md-nav__link">
    <span class="md-ellipsis">
      2. Massive Failure Recovery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-dynamic-cluster-adaptation" class="md-nav__link">
    <span class="md-ellipsis">
      3. Dynamic Cluster Adaptation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-dispatcher-integration" class="md-nav__link">
    <span class="md-ellipsis">
      4. Dispatcher Integration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-the-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring the Plugin
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuring the Plugin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#election-and-heartbeat" class="md-nav__link">
    <span class="md-ellipsis">
      Election and Heartbeat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consensus-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Consensus Variables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operating-modes" class="md-nav__link">
    <span class="md-ellipsis">
      Operating Modes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Operating Modes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#classic-raft-mode-raftmodeclassic" class="md-nav__link">
    <span class="md-ellipsis">
      Classic Raft Mode (RaftMode.CLASSIC)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fault-tolerant-raft-mode-raftmodefault_tolerant" class="md-nav__link">
    <span class="md-ellipsis">
      Fault-Tolerant Raft Mode (RaftMode.FAULT_TOLERANT)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mode-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      Mode Comparison
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Examples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runtime-mode-detection" class="md-nav__link">
    <span class="md-ellipsis">
      Runtime Mode Detection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#choosing-the-right-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Choosing the Right Mode
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-detection" class="md-nav__link">
    <span class="md-ellipsis">
      Failure Detection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logging" class="md-nav__link">
    <span class="md-ellipsis">
      Logging
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Logging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-logging-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Logging Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#available-log-levels" class="md-nav__link">
    <span class="md-ellipsis">
      Available Log Levels
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logging-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Logging Examples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log-output-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Log Output Examples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logger-names" class="md-nav__link">
    <span class="md-ellipsis">
      Logger Names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-logging-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Logging Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-the-consensus-instance" class="md-nav__link">
    <span class="md-ellipsis">
      Working with the Consensus Instance
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Working with the Consensus Instance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Operations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#method-usage-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Method Usage Examples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#active-node-information-fault-tolerant-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Active Node Information (Fault-Tolerant Mode)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#node-failure-simulation" class="md-nav__link">
    <span class="md-ellipsis">
      Node Failure Simulation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-the-showcase" class="md-nav__link">
    <span class="md-ellipsis">
      Running the Showcase
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-guidelines" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Guidelines
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration Guidelines">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#election-timeouts" class="md-nav__link">
    <span class="md-ellipsis">
      Election Timeouts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#heartbeat-intervals" class="md-nav__link">
    <span class="md-ellipsis">
      Heartbeat Intervals
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-detection-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Failure Detection Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mode-selection" class="md-nav__link">
    <span class="md-ellipsis">
      Mode Selection
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Mode Selection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-classic-mode-when" class="md-nav__link">
    <span class="md-ellipsis">
      Use Classic Mode When:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-fault-tolerant-mode-when" class="md-nav__link">
    <span class="md-ellipsis">
      Use Fault-Tolerant Mode When:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Error Handling
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Common Issues
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Issues">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-no-leader-elected" class="md-nav__link">
    <span class="md-ellipsis">
      1. No Leader Elected
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-values-not-committing" class="md-nav__link">
    <span class="md-ellipsis">
      2. Values Not Committing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-high-election-frequency" class="md-nav__link">
    <span class="md-ellipsis">
      3. High Election Frequency
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#known-issue-fault-tolerance-communication-range" class="md-nav__link">
    <span class="md-ellipsis">
      ⚠️ Known Issue: Fault Tolerance Communication Range
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging-tips" class="md-nav__link">
    <span class="md-ellipsis">
      Debugging Tips
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Debugging Tips">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enable-logging" class="md-nav__link">
    <span class="md-ellipsis">
      Enable Logging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitor-node-states" class="md-nav__link">
    <span class="md-ellipsis">
      Monitor Node States
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-network-connectivity" class="md-nav__link">
    <span class="md-ellipsis">
      Check Network Connectivity
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Monitoring
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-quick-reference" class="md-nav__link">
    <span class="md-ellipsis">
      API Quick Reference
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API Quick Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Methods
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#raftconfig-methods" class="md-nav__link">
    <span class="md-ellipsis">
      RaftConfig Methods
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lifecycle-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Lifecycle Methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leadership-and-state-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Leadership and State Methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#value-management-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Value Management Methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#node-management-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Node Management Methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#active-node-information-methods-fault-tolerant-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Active Node Information Methods (Fault-Tolerant Mode)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quorum-and-majority-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Quorum and Majority Methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitoring-and-debugging-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Monitoring and Debugging Methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cluster-management-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Cluster Management Methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complete-usage-example" class="md-nav__link">
    <span class="md-ellipsis">
      Complete Usage Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Prototype Mode
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Prototype Mode
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Prototype%20Mode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Prototype%20Mode/communication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Communication
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Encapsulator
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            Encapsulator
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Encapsulator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Encapsulator/interop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Interop
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Encapsulator/python/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Protocol
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Protocol
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Protocol/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Protocol/position/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Position
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_3" >
        
          
          <label class="md-nav__link" for="__nav_5_2_3" id="__nav_5_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Messages
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_3">
            <span class="md-nav__icon md-icon"></span>
            Messages
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Protocol/messages/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Protocol/messages/communication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Communication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Protocol/messages/mobility/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mobility
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_4" >
        
          
          <label class="md-nav__link" for="__nav_5_2_4" id="__nav_5_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Plugins
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_4">
            <span class="md-nav__icon md-icon"></span>
            Plugins
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Protocol/plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Protocol/plugins/dispatcher/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dispatcher
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Protocol/plugins/follow_mobility/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Follow Mobility
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Protocol/plugins/mission_mobility/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mission Mobility
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Protocol/plugins/radio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Radio
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Protocol/plugins/raft/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RAFT Consensus Plugin
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Protocol/plugins/random_mobility/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Random Mobility
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Simulator
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            Simulator
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Simulator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Simulator/event/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Event
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Simulator/log/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Log
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Simulator/node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Node
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Simulator/simulation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Simulation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3_6" >
        
          
          <label class="md-nav__link" for="__nav_5_3_6" id="__nav_5_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Extension
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3_6">
            <span class="md-nav__icon md-icon"></span>
            Extension
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Simulator/Extension/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Simulator/Extension/camera/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Camera
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Simulator/Extension/communication_controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Communication controller
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Simulator/Extension/visualization_controller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Visualization controller
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3_7" >
        
          
          <label class="md-nav__link" for="__nav_5_3_7" id="__nav_5_3_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Handlers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3_7">
            <span class="md-nav__icon md-icon"></span>
            Handlers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Simulator/handlers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Simulator/handlers/assertion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Assertion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Simulator/handlers/communication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Communication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Simulator/handlers/mobility/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mobility
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Simulator/handlers/timer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Timer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Modules/Simulator/handlers/visualization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Visualization
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#key-capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      Key Capabilities
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-start" class="md-nav__link">
    <span class="md-ellipsis">
      Quick Start
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quick Start">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-usage-with-failure-detection" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Usage with Failure Detection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dispatcher-integration" class="md-nav__link">
    <span class="md-ellipsis">
      Dispatcher Integration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architecture Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#component-relationships" class="md-nav__link">
    <span class="md-ellipsis">
      Component Relationships
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Message Flow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-innovations" class="md-nav__link">
    <span class="md-ellipsis">
      Key Innovations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key Innovations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-active-node-discovery-system" class="md-nav__link">
    <span class="md-ellipsis">
      1. Active Node Discovery System
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-massive-failure-recovery" class="md-nav__link">
    <span class="md-ellipsis">
      2. Massive Failure Recovery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-dynamic-cluster-adaptation" class="md-nav__link">
    <span class="md-ellipsis">
      3. Dynamic Cluster Adaptation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-dispatcher-integration" class="md-nav__link">
    <span class="md-ellipsis">
      4. Dispatcher Integration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-the-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring the Plugin
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuring the Plugin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#election-and-heartbeat" class="md-nav__link">
    <span class="md-ellipsis">
      Election and Heartbeat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#consensus-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Consensus Variables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operating-modes" class="md-nav__link">
    <span class="md-ellipsis">
      Operating Modes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Operating Modes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#classic-raft-mode-raftmodeclassic" class="md-nav__link">
    <span class="md-ellipsis">
      Classic Raft Mode (RaftMode.CLASSIC)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fault-tolerant-raft-mode-raftmodefault_tolerant" class="md-nav__link">
    <span class="md-ellipsis">
      Fault-Tolerant Raft Mode (RaftMode.FAULT_TOLERANT)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mode-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      Mode Comparison
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Examples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runtime-mode-detection" class="md-nav__link">
    <span class="md-ellipsis">
      Runtime Mode Detection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#choosing-the-right-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Choosing the Right Mode
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-detection" class="md-nav__link">
    <span class="md-ellipsis">
      Failure Detection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logging" class="md-nav__link">
    <span class="md-ellipsis">
      Logging
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Logging">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-logging-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Logging Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#available-log-levels" class="md-nav__link">
    <span class="md-ellipsis">
      Available Log Levels
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logging-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Logging Examples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log-output-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Log Output Examples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#logger-names" class="md-nav__link">
    <span class="md-ellipsis">
      Logger Names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-logging-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Logging Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#working-with-the-consensus-instance" class="md-nav__link">
    <span class="md-ellipsis">
      Working with the Consensus Instance
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Working with the Consensus Instance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Operations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#method-usage-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Method Usage Examples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#active-node-information-fault-tolerant-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Active Node Information (Fault-Tolerant Mode)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#node-failure-simulation" class="md-nav__link">
    <span class="md-ellipsis">
      Node Failure Simulation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-the-showcase" class="md-nav__link">
    <span class="md-ellipsis">
      Running the Showcase
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-guidelines" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Guidelines
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration Guidelines">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#election-timeouts" class="md-nav__link">
    <span class="md-ellipsis">
      Election Timeouts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#heartbeat-intervals" class="md-nav__link">
    <span class="md-ellipsis">
      Heartbeat Intervals
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#failure-detection-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Failure Detection Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mode-selection" class="md-nav__link">
    <span class="md-ellipsis">
      Mode Selection
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Mode Selection">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-classic-mode-when" class="md-nav__link">
    <span class="md-ellipsis">
      Use Classic Mode When:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-fault-tolerant-mode-when" class="md-nav__link">
    <span class="md-ellipsis">
      Use Fault-Tolerant Mode When:
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Error Handling
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Common Issues
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Issues">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-no-leader-elected" class="md-nav__link">
    <span class="md-ellipsis">
      1. No Leader Elected
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-values-not-committing" class="md-nav__link">
    <span class="md-ellipsis">
      2. Values Not Committing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-high-election-frequency" class="md-nav__link">
    <span class="md-ellipsis">
      3. High Election Frequency
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#known-issue-fault-tolerance-communication-range" class="md-nav__link">
    <span class="md-ellipsis">
      ⚠️ Known Issue: Fault Tolerance Communication Range
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging-tips" class="md-nav__link">
    <span class="md-ellipsis">
      Debugging Tips
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Debugging Tips">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enable-logging" class="md-nav__link">
    <span class="md-ellipsis">
      Enable Logging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitor-node-states" class="md-nav__link">
    <span class="md-ellipsis">
      Monitor Node States
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-network-connectivity" class="md-nav__link">
    <span class="md-ellipsis">
      Check Network Connectivity
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Monitoring
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-quick-reference" class="md-nav__link">
    <span class="md-ellipsis">
      API Quick Reference
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API Quick Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Methods
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#raftconfig-methods" class="md-nav__link">
    <span class="md-ellipsis">
      RaftConfig Methods
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lifecycle-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Lifecycle Methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leadership-and-state-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Leadership and State Methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#value-management-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Value Management Methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#node-management-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Node Management Methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#active-node-information-methods-fault-tolerant-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Active Node Information Methods (Fault-Tolerant Mode)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quorum-and-majority-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Quorum and Majority Methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitoring-and-debugging-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Monitoring and Debugging Methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cluster-management-methods" class="md-nav__link">
    <span class="md-ellipsis">
      Cluster Management Methods
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#complete-usage-example" class="md-nav__link">
    <span class="md-ellipsis">
      Complete Usage Example
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="raft-consensus-plugin-guide">RAFT Consensus Plugin Guide</h1>
<p>The RAFT consensus plugin ships with GrADyS-SIM NextGen and provides a fault-tolerant coordination layer for protocols that need to agree on shared values. This guide walks through the essentials for configuring the plugin, wiring it into a protocol, and validating the showcase scenario.</p>
<h2 id="key-capabilities">Key Capabilities</h2>
<ul>
<li><strong>Fault-Tolerant Consensus</strong>: Robust leader election with automatic recovery</li>
<li><strong>Active Node Discovery</strong>: Dynamic cluster size detection for accurate majority calculations</li>
<li><strong>Heartbeat-Based Failure Detection</strong>: Automatic detection of failed nodes</li>
<li><strong>Massive Failure Recovery</strong>: Recovers from scenarios where massive quantity of nodes fail</li>
<li><strong>Scalable Architecture</strong>: Works with any number of nodes (10, 50, 100+)</li>
<li><strong>GradySim Integration</strong>: Seamless integration with GrADyS-SIM NextGen simulation framework</li>
<li><strong>No Log Replication</strong>: Lightweight implementation focused on consensus values</li>
<li><strong>Dynamic Majority Calculation</strong>: Thresholds adapt to actual active nodes</li>
<li><strong>Dual Operation Modes</strong>: Classic Raft and Fault-Tolerant modes</li>
<li><strong>Dispatcher Integration</strong>: Automatic handling of RAFT-specific packets and timers</li>
<li><strong>Optional Statistics</strong>: State inspection helpers for debugging</li>
</ul>
<h2 id="quick-start">Quick Start</h2>
<h3 id="basic-setup">Basic Setup</h3>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">gradysim.protocol.plugin.raft</span><span class="w"> </span><span class="kn">import</span> <span class="n">RaftConfig</span><span class="p">,</span> <span class="n">RaftMode</span><span class="p">,</span> <span class="n">RaftConsensusPlugin</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="k">class</span><span class="w"> </span><span class="nc">RaftProtocol</span><span class="p">(</span><span class="n">IProtocol</span><span class="p">):</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>        <span class="c1"># Configure consensus</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>        <span class="n">config</span> <span class="o">=</span> <span class="n">RaftConfig</span><span class="p">()</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>        <span class="n">config</span><span class="o">.</span><span class="n">set_election_timeout</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>  <span class="c1"># 150-300ms election timeout</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>        <span class="n">config</span><span class="o">.</span><span class="n">set_heartbeat_interval</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>      <span class="c1"># 50ms heartbeat interval</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>        <span class="n">config</span><span class="o">.</span><span class="n">add_consensus_variable</span><span class="p">(</span><span class="s2">&quot;sequence&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>        <span class="n">config</span><span class="o">.</span><span class="n">add_consensus_variable</span><span class="p">(</span><span class="s2">&quot;leader_position&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>        <span class="n">config</span><span class="o">.</span><span class="n">set_logging</span><span class="p">(</span><span class="n">enable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">&quot;INFO&quot;</span><span class="p">)</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>        <span class="c1"># Choose operation mode</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>        <span class="n">config</span><span class="o">.</span><span class="n">set_raft_mode</span><span class="p">(</span><span class="n">RaftMode</span><span class="o">.</span><span class="n">FAULT_TOLERANT</span><span class="p">)</span>  <span class="c1"># Default: fault-tolerant mode</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>        <span class="c1"># config.set_raft_mode(RaftMode.CLASSIC)      # Alternative: classic mode</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>        <span class="c1"># Initialize the Raft consensus plugin</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span> <span class="o">=</span> <span class="n">RaftConsensusPlugin</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>        <span class="c1"># Set known nodes and start consensus</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">set_known_nodes</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)))</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">handle_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timer</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>        <span class="c1"># Non RAFT timers continue to arrive here</span>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>        <span class="k">if</span> <span class="n">timer</span> <span class="o">==</span> <span class="s2">&quot;app_timer&quot;</span><span class="p">:</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">schedule_timer</span><span class="p">(</span><span class="s2">&quot;app_timer&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">current_time</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">handle_telemetry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">telemetry</span><span class="p">:</span> <span class="n">Telemetry</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>        <span class="c1"># Propose values if leader</span>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">is_leader</span><span class="p">():</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">propose_value</span><span class="p">(</span><span class="s2">&quot;sequence&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">telemetry</span><span class="o">.</span><span class="n">simulation_time</span><span class="p">))</span>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">propose_value</span><span class="p">(</span><span class="s2">&quot;leader_position&quot;</span><span class="p">,</span> <span class="s2">&quot;north&quot;</span><span class="p">)</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">finish</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</span></code></pre></div>
<h3 id="advanced-usage-with-failure-detection">Advanced Usage with Failure Detection</h3>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>    <span class="n">config</span> <span class="o">=</span> <span class="n">RaftConfig</span><span class="p">()</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>    <span class="n">config</span><span class="o">.</span><span class="n">set_election_timeout</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>    <span class="n">config</span><span class="o">.</span><span class="n">set_heartbeat_interval</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>    <span class="n">config</span><span class="o">.</span><span class="n">add_consensus_variable</span><span class="p">(</span><span class="s2">&quot;sequence&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>    <span class="n">config</span><span class="o">.</span><span class="n">set_raft_mode</span><span class="p">(</span><span class="n">RaftMode</span><span class="o">.</span><span class="n">FAULT_TOLERANT</span><span class="p">)</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>    <span class="c1"># Configure failure detection parameters</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>    <span class="n">failure_config</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_failure_config</span><span class="p">()</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>    <span class="n">failure_config</span><span class="o">.</span><span class="n">set_failure_threshold</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>      <span class="c1"># 2 failed heartbeats to mark as failed</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>    <span class="n">failure_config</span><span class="o">.</span><span class="n">set_recovery_threshold</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     <span class="c1"># 3 successful heartbeats to recover</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>    <span class="n">failure_config</span><span class="o">.</span><span class="n">set_detection_interval</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>     <span class="c1"># Check every 2 heartbeats</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>    <span class="n">failure_config</span><span class="o">.</span><span class="n">set_heartbeat_timeout</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>      <span class="c1"># 4× heartbeat_interval = 200ms timeout</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span> <span class="o">=</span> <span class="n">RaftConsensusPlugin</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">set_known_nodes</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)))</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span></code></pre></div>
<h3 id="dispatcher-integration">Dispatcher Integration</h3>
<p>The plugin automatically prefixes every internal message and timer with <code>__RAFT__</code> when talking to the provider. Dispatcher hooks intercept any packet or timer that carries this prefix and stop it from reaching the protocol. All other events pass through unchanged, so protocol logic stays clean.</p>
<h2 id="architecture-overview">Architecture Overview</h2>
<h3 id="component-relationships"><strong>Component Relationships</strong></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>│ RaftConsensus   │    │    RaftNode     │    │   GradySim      │
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>│   (Facade)      │◄──►│   (Core Logic)  │◄──►│   (Platform)    │
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>└─────────────────┘    └─────────────────┘    └─────────────────┘
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>         │                       │                       │
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>         ▼                       ▼                       ▼
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>│   RaftConfig    │    │HeartbeatDetector│    │   Simulation    │
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>│   (Settings)    │    │   (Internal)    │    │   Framework     │
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>└─────────────────┘    └─────────────────┘    └─────────────────┘
</span></code></pre></div>
<p><strong>Component Relationships:</strong>
- <strong>RaftConsensus</strong>: Public facade for consensus operations
- <strong>RaftNode</strong>: Core Raft algorithm implementation
- <strong>GradySim</strong>: Simulation framework integration
- <strong>RaftConfig</strong>: Configuration and settings management
- <strong>HeartbeatDetector</strong>: Internal failure detection (Fault-Tolerant mode only)</p>
<h3 id="message-flow"><strong>Message Flow</strong></h3>
<ol>
<li><strong>Consensus Request</strong>: <code>RaftConsensus.propose_value()</code></li>
<li><strong>Internal Processing</strong>: <code>RaftNode</code> processes the request</li>
<li><strong>Platform Communication</strong>: Uses GradySim provider to send messages</li>
<li><strong>Response Handling</strong>: Processes responses via dispatcher</li>
<li><strong>State Update</strong>: Updates consensus state and notifies callers</li>
</ol>
<h3 id="key-innovations"><strong>Key Innovations</strong></h3>
<h4 id="1-active-node-discovery-system"><strong>1. Active Node Discovery System</strong></h4>
<p>The RAFT plugin introduces a <strong>discovery phase</strong> before elections that solves the fundamental problem of unknown cluster size after failures:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1"># Traditional Raft: Uses fixed cluster size</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="n">majority</span> <span class="o">=</span> <span class="p">(</span><span class="n">total_nodes</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c1"># Always uses total_nodes</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="c1"># RAFT Plugin: Discovers actual active nodes</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="n">discovered_active</span> <span class="o">=</span> <span class="n">discover_active_nodes</span><span class="p">()</span>  <span class="c1"># Dynamic discovery</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="n">majority</span> <span class="o">=</span> <span class="p">(</span><span class="n">discovered_active</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>     <span class="c1"># Uses actual active nodes</span>
</span></code></pre></div>
<p><strong>Benefits:</strong>
- <strong>Accurate majority calculations</strong> after failures
- <strong>Faster leader election</strong> with correct thresholds
- <strong>Automatic adaptation</strong> to cluster changes
- <strong>No manual configuration</strong> needed</p>
<h4 id="2-massive-failure-recovery"><strong>2. Massive Failure Recovery</strong></h4>
<p>The plugin can recover from scenarios that would break traditional Raft implementations:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># Scenario: 10 nodes, 8 fail (including leader)</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="c1"># Traditional Raft: Stuck - can&#39;t calculate majority</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="c1"># RAFT Plugin: Discovers 2 active nodes, calculates majority = 2, elects leader</span>
</span></code></pre></div>
<h4 id="3-dynamic-cluster-adaptation"><strong>3. Dynamic Cluster Adaptation</strong></h4>
<p>The system automatically adapts to cluster changes:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1"># Initial: 10 nodes active</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="c1"># After failures: 3 nodes active</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="c1"># RAFT Plugin automatically adjusts majority threshold from 6 to 2</span>
</span></code></pre></div>
<h4 id="4-dispatcher-integration"><strong>4. Dispatcher Integration</strong></h4>
<p>The plugin automatically handles RAFT-specific communication without affecting your protocol:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># The plugin automatically prefixes internal messages and timers with &quot;__RAFT__&quot;</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="c1"># Your protocol only sees non-RAFT events</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="k">def</span><span class="w"> </span><span class="nf">handle_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timer</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>    <span class="c1"># RAFT timers are automatically intercepted</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>    <span class="c1"># Only your application timers reach here</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>    <span class="k">if</span> <span class="n">timer</span> <span class="o">==</span> <span class="s2">&quot;app_timer&quot;</span><span class="p">:</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">schedule_timer</span><span class="p">(</span><span class="s2">&quot;app_timer&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">current_time</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span></code></pre></div>
<h2 id="configuring-the-plugin">Configuring the Plugin</h2>
<h3 id="election-and-heartbeat">Election and Heartbeat</h3>
<ul>
<li><code>set_election_timeout(min_ms, max_ms)</code>: random election timeout window. Typical values are 150-300 ms.</li>
<li><code>set_heartbeat_interval(interval_ms)</code>: heartbeat cadence. Keep it well below the election timeout (for example 50 ms).</li>
</ul>
<h3 id="consensus-variables">Consensus Variables</h3>
<p>Declare everything that must reach agreement before starting the consensus:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="n">config</span><span class="o">.</span><span class="n">add_consensus_variable</span><span class="p">(</span><span class="s2">&quot;sequence&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="n">config</span><span class="o">.</span><span class="n">add_consensus_variable</span><span class="p">(</span><span class="s2">&quot;formation_info&quot;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="n">config</span><span class="o">.</span><span class="n">add_consensus_variable</span><span class="p">(</span><span class="s2">&quot;leader_position&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="n">config</span><span class="o">.</span><span class="n">add_consensus_variable</span><span class="p">(</span><span class="s2">&quot;temperature&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="n">config</span><span class="o">.</span><span class="n">add_consensus_variable</span><span class="p">(</span><span class="s2">&quot;is_active&quot;</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)</span>
</span></code></pre></div>
<p><strong>Supported Variable Types:</strong>
- <strong>Primitive Types</strong>: <code>int</code>, <code>float</code>, <code>str</code>, <code>bool</code>
- <strong>Complex Types</strong>: <code>dict</code>, <code>list</code>, <code>tuple</code>
- <strong>None Values</strong>: <code>None</code> is also supported
- <strong>Custom Objects</strong>: Any object that can be JSON serialized</p>
<p>Committed values are available through <code>get_committed_value(name)</code> or <code>get_all_committed_values()</code>.</p>
<h3 id="operating-modes">Operating Modes</h3>
<p>The RAFT plugin supports two distinct operation modes, allowing you to choose between classic Raft behavior and fault-tolerant enhancements:</p>
<h4 id="classic-raft-mode-raftmodeclassic"><strong>Classic Raft Mode (<code>RaftMode.CLASSIC</code>)</strong></h4>
<p>Classic Raft Mode implements the standard Raft protocol as specified by Ongaro and Ousterhout. The only divergence in our system is replication: the plugin targets agreement on consensus values rather than maintaining a replicated log.</p>
<p><strong>Characteristics:</strong>
- <strong>Fixed Cluster Size</strong>: Uses total known nodes for all majority calculations
- <strong>Direct Elections</strong>: No discovery phase - immediate election on timeout
- <strong>Standard Behavior</strong>: Classic Raft consensus semantics
- <strong>Better Performance</strong>: Lower overhead (no discovery phase)
- <strong>Deterministic</strong>: Predictable behavior for static clusters
- <strong>Manual Failure Handling</strong>: Requires manual cluster reconfiguration after failures</p>
<p><strong>Use Cases:</strong>
- Static clusters with fixed, known node count
- Environments where performance is critical
- Systems requiring standard Raft semantics
- Scenarios with manual failure management</p>
<h4 id="fault-tolerant-raft-mode-raftmodefault_tolerant"><strong>Fault-Tolerant Raft Mode (<code>RaftMode.FAULT_TOLERANT</code>)</strong></h4>
<p>Enhanced Raft implementation with automatic fault tolerance and dynamic cluster adaptation.</p>
<p><strong>Characteristics:</strong>
- <strong>Dynamic Active Node Detection</strong>: Discovery phase before elections
- <strong>Adaptive Majority Calculation</strong>: Uses active node count for thresholds
- <strong>Massive Failure Recovery</strong>: Automatic recovery from massive quantity of node failures
- <strong>Self-Healing</strong>: Automatic adaptation to cluster changes
- <strong>Fault Tolerance</strong>: No manual intervention needed
- <strong>Active Node Information</strong>: Real-time access to node information
- <strong>Discovery Overhead</strong>: Small performance cost for discovery phase</p>
<p><strong>Use Cases:</strong>
- Dynamic environments with node failures
- Distributed systems requiring high availability
- Scenarios with unpredictable node failures
- Systems that need automatic fault recovery</p>
<h4 id="mode-comparison"><strong>Mode Comparison</strong></h4>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Classic Mode</th>
<th>Fault-Tolerant Mode</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Discovery Phase</strong></td>
<td>❌ Disabled</td>
<td>✅ Enabled</td>
</tr>
<tr>
<td><strong>Majority Calculation</strong></td>
<td>Fixed (total nodes)</td>
<td>Dynamic (active nodes)</td>
</tr>
<tr>
<td><strong>Failure Recovery</strong></td>
<td>❌ Manual</td>
<td>✅ Automatic</td>
</tr>
<tr>
<td><strong>Performance</strong></td>
<td>✅ Faster</td>
<td>⚡ Slight overhead</td>
</tr>
<tr>
<td><strong>Massive Failures</strong></td>
<td>❌ Requires intervention</td>
<td>✅ Auto-recovery</td>
</tr>
<tr>
<td><strong>Active Node Info</strong></td>
<td>❌ Not available</td>
<td>✅ Available</td>
</tr>
<tr>
<td><strong>Use Case</strong></td>
<td>Static clusters</td>
<td>Dynamic clusters</td>
</tr>
<tr>
<td><strong>Standard Raft</strong></td>
<td>✅ Compliant</td>
<td>Enhanced</td>
</tr>
</tbody>
</table>
<h4 id="configuration-examples"><strong>Configuration Examples</strong></h4>
<p><strong>Classic Raft Mode Configuration:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="n">config</span> <span class="o">=</span> <span class="n">RaftConfig</span><span class="p">()</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="n">config</span><span class="o">.</span><span class="n">set_raft_mode</span><span class="p">(</span><span class="n">RaftMode</span><span class="o">.</span><span class="n">CLASSIC</span><span class="p">)</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="n">config</span><span class="o">.</span><span class="n">set_election_timeout</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="n">config</span><span class="o">.</span><span class="n">set_heartbeat_interval</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="c1"># Classic mode: Uses total known nodes for majority</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="c1"># No discovery phase - direct elections</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="c1"># Standard Raft semantics</span>
</span></code></pre></div></p>
<p><strong>Fault-Tolerant Raft Mode Configuration:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="n">config</span> <span class="o">=</span> <span class="n">RaftConfig</span><span class="p">()</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="n">config</span><span class="o">.</span><span class="n">set_raft_mode</span><span class="p">(</span><span class="n">RaftMode</span><span class="o">.</span><span class="n">FAULT_TOLERANT</span><span class="p">)</span>  <span class="c1"># Default mode</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="n">config</span><span class="o">.</span><span class="n">set_election_timeout</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span>  <span class="c1"># Longer timeouts for discovery</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="n">config</span><span class="o">.</span><span class="n">set_heartbeat_interval</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="c1"># Fault-tolerant mode: Uses active node discovery</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="c1"># Dynamic majority calculations</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="c1"># Automatic fault recovery</span>
</span></code></pre></div></p>
<h4 id="runtime-mode-detection"><strong>Runtime Mode Detection</strong></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c1"># Check current mode</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">is_classic_mode</span><span class="p">():</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Running in Classic Raft mode&quot;</span><span class="p">)</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>    <span class="c1"># No discovery, standard Raft behavior</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="k">elif</span> <span class="n">config</span><span class="o">.</span><span class="n">is_fault_tolerant_mode</span><span class="p">():</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Running in Fault-Tolerant Raft mode&quot;</span><span class="p">)</span>  
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>    <span class="c1"># Discovery enabled, dynamic fault tolerance</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="c1"># Get mode programmatically</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="n">current_mode</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_raft_mode</span><span class="p">()</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current mode: </span><span class="si">{</span><span class="n">current_mode</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
<h4 id="choosing-the-right-mode"><strong>Choosing the Right Mode</strong></h4>
<p><strong>Choose Classic Mode When:</strong>
- Cluster size is fixed and known
- Performance is critical
- Standard Raft behavior is required
- Manual failure management is acceptable</p>
<p><strong>Choose Fault-Tolerant Mode When:</strong>
- Nodes may fail unexpectedly
- Automatic fault recovery is needed
- Cluster size varies dynamically
- High availability is required
- Active node information is needed</p>
<p>Switch modes with <code>config.set_raft_mode(RaftMode.CLASSIC)</code> or <code>config.set_raft_mode(RaftMode.FAULT_TOLERANT)</code>.</p>
<h3 id="failure-detection">Failure Detection</h3>
<p><code>config.get_failure_config()</code> exposes thresholds for the heartbeat detector used in fault tolerant mode:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="n">failure</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_failure_config</span><span class="p">()</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="n">failure</span><span class="o">.</span><span class="n">set_failure_threshold</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>      <span class="c1"># 2 failed heartbeats to mark as failed</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="n">failure</span><span class="o">.</span><span class="n">set_recovery_threshold</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     <span class="c1"># 3 successful heartbeats to recover</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="n">failure</span><span class="o">.</span><span class="n">set_detection_interval</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>     <span class="c1"># Check every 2 heartbeats</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="n">failure</span><span class="o">.</span><span class="n">set_heartbeat_timeout</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>      <span class="c1"># 4 * heartbeat interval</span>
</span></code></pre></div>
<p><strong>Failure Detection Configuration Options:</strong></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="c1"># Conservative Detection (High reliability, slower detection)</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="n">failure</span><span class="o">.</span><span class="n">set_failure_threshold</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>      <span class="c1"># 5 consecutive failures</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="n">failure</span><span class="o">.</span><span class="n">set_recovery_threshold</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     <span class="c1"># 3 consecutive successes</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="n">failure</span><span class="o">.</span><span class="n">set_detection_interval</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     <span class="c1"># Check every 3 heartbeats</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="n">failure</span><span class="o">.</span><span class="n">set_heartbeat_timeout</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>      <span class="c1"># 6× heartbeat_interval = 300ms timeout</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="c1"># Aggressive Detection (Fast detection, may have false positives)</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="n">failure</span><span class="o">.</span><span class="n">set_failure_threshold</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>      <span class="c1"># 2 consecutive failures</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="n">failure</span><span class="o">.</span><span class="n">set_recovery_threshold</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>     <span class="c1"># 1 consecutive success</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="n">failure</span><span class="o">.</span><span class="n">set_detection_interval</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>     <span class="c1"># Check every heartbeat</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="n">failure</span><span class="o">.</span><span class="n">set_absolute_timeout</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>     <span class="c1"># 100ms absolute timeout</span>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="c1"># Balanced Detection (Recommended default)</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a><span class="n">failure</span><span class="o">.</span><span class="n">set_failure_threshold</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>      <span class="c1"># 3 consecutive failures</span>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a><span class="n">failure</span><span class="o">.</span><span class="n">set_recovery_threshold</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>     <span class="c1"># 2 consecutive successes</span>
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a><span class="n">failure</span><span class="o">.</span><span class="n">set_detection_interval</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>     <span class="c1"># Check every 2 heartbeats</span>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a><span class="n">failure</span><span class="o">.</span><span class="n">set_heartbeat_timeout</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>      <span class="c1"># 4× heartbeat_interval = 200ms timeout</span>
</span></code></pre></div>
<h3 id="logging">Logging</h3>
<p>The RAFT plugin provides comprehensive logging capabilities for debugging and monitoring consensus behavior. Logging is configured per node and can be customized based on your needs.</p>
<h4 id="basic-logging-configuration"><strong>Basic Logging Configuration</strong></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="c1"># Enable logging with default INFO level</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="n">config</span><span class="o">.</span><span class="n">set_logging</span><span class="p">(</span><span class="n">enable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="c1"># Enable logging with specific level</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="n">config</span><span class="o">.</span><span class="n">set_logging</span><span class="p">(</span><span class="n">enable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">&quot;DEBUG&quot;</span><span class="p">)</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="n">config</span><span class="o">.</span><span class="n">set_logging</span><span class="p">(</span><span class="n">enable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">&quot;INFO&quot;</span><span class="p">)</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="n">config</span><span class="o">.</span><span class="n">set_logging</span><span class="p">(</span><span class="n">enable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">&quot;WARNING&quot;</span><span class="p">)</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="n">config</span><span class="o">.</span><span class="n">set_logging</span><span class="p">(</span><span class="n">enable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">&quot;ERROR&quot;</span><span class="p">)</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="c1"># Disable logging (only errors will be shown)</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="n">config</span><span class="o">.</span><span class="n">set_logging</span><span class="p">(</span><span class="n">enable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></code></pre></div>
<h4 id="available-log-levels"><strong>Available Log Levels</strong></h4>
<table>
<thead>
<tr>
<th>Level</th>
<th>Description</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DEBUG</code></td>
<td>Detailed information for diagnosing problems</td>
<td>Development and debugging</td>
</tr>
<tr>
<td><code>INFO</code></td>
<td>General information about consensus operations</td>
<td>Normal operation monitoring</td>
</tr>
<tr>
<td><code>WARNING</code></td>
<td>Warning messages for potential issues</td>
<td>Production monitoring</td>
</tr>
<tr>
<td><code>ERROR</code></td>
<td>Error messages for serious problems</td>
<td>Error tracking</td>
</tr>
</tbody>
</table>
<h4 id="logging-examples"><strong>Logging Examples</strong></h4>
<p><strong>Development and Debugging:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="n">config</span> <span class="o">=</span> <span class="n">RaftConfig</span><span class="p">()</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="n">config</span><span class="o">.</span><span class="n">set_logging</span><span class="p">(</span><span class="n">enable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">&quot;DEBUG&quot;</span><span class="p">)</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="c1"># This will show:</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="c1"># - Detailed election processes</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="c1"># - Message exchanges</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="c1"># - Timer events</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="c1"># - State transitions</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="c1"># - Failure detection details</span>
</span></code></pre></div></p>
<p><strong>Production Monitoring:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="n">config</span> <span class="o">=</span> <span class="n">RaftConfig</span><span class="p">()</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="n">config</span><span class="o">.</span><span class="n">set_logging</span><span class="p">(</span><span class="n">enable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">&quot;INFO&quot;</span><span class="p">)</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="c1"># This will show:</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="c1"># - Election results</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="c1"># - Leadership changes</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="c1"># - Consensus value commits</span>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="c1"># - Major state changes</span>
</span></code></pre></div></p>
<p><strong>Minimal Logging:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="n">config</span> <span class="o">=</span> <span class="n">RaftConfig</span><span class="p">()</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="n">config</span><span class="o">.</span><span class="n">set_logging</span><span class="p">(</span><span class="n">enable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">&quot;WARNING&quot;</span><span class="p">)</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="c1"># This will show:</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="c1"># - Only warnings and errors</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="c1"># - Critical consensus issues</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="c1"># - Failure scenarios</span>
</span></code></pre></div></p>
<p><strong>Silent Mode:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="n">config</span> <span class="o">=</span> <span class="n">RaftConfig</span><span class="p">()</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="n">config</span><span class="o">.</span><span class="n">set_logging</span><span class="p">(</span><span class="n">enable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="c1"># This will show:</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="c1"># - Only critical errors</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="c1"># - System failures</span>
</span></code></pre></div></p>
<h4 id="log-output-examples"><strong>Log Output Examples</strong></h4>
<p>When logging is enabled, you'll see output like:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>INFO:RaftConsensus-1: RaftConsensus initialized for node 1
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>INFO:RaftNode-1: Starting Raft consensus for node 1
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>INFO:RaftNode-1: Node 1 became candidate in term 1
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>INFO:RaftNode-1: Node 1 became leader in term 1
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>INFO:RaftNode-1: Proposing value for variable &#39;sequence&#39;: 42
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>INFO:RaftNode-1: Value committed for variable &#39;sequence&#39;: 42
</span></code></pre></div>
<h4 id="logger-names"><strong>Logger Names</strong></h4>
<p>The plugin creates separate loggers for different components:</p>
<ul>
<li><strong><code>RaftConsensus-{node_id}</code></strong>: Main consensus facade logger</li>
<li><strong><code>RaftNode-{node_id}</code></strong>: Internal node implementation logger</li>
</ul>
<p>This allows you to configure different log levels for different components if needed.</p>
<h4 id="advanced-logging-configuration"><strong>Advanced Logging Configuration</strong></h4>
<p>You can also configure logging at the Python logging level:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="c1"># Configure root logger</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>    <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>    <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%(asctime)s</span><span class="s1"> - </span><span class="si">%(name)s</span><span class="s1"> - </span><span class="si">%(levelname)s</span><span class="s1"> - </span><span class="si">%(message)s</span><span class="s1">&#39;</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="p">)</span>
</span><span id="__span-19-8"><a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>
</span><span id="__span-19-9"><a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="c1"># Configure specific RAFT loggers</span>
</span><span id="__span-19-10"><a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;RaftConsensus&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
</span><span id="__span-19-11"><a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;RaftNode&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
</span></code></pre></div>
<h2 id="working-with-the-consensus-instance">Working with the Consensus Instance</h2>
<h3 id="basic-operations">Basic Operations</h3>
<p><strong>Leadership and State:</strong>
- <code>is_leader()</code> - Check if this node is the current leader
- <code>get_leader_id()</code> - Get the current leader ID
- <code>get_current_state()</code> - Get current Raft state (FOLLOWER, CANDIDATE, LEADER)
- <code>get_current_term()</code> - Get current term number</p>
<p><strong>Value Management:</strong>
- <code>propose_value(name, value)</code> - Propose new value (leader only)
- <code>get_committed_value(name)</code> - Get committed value for a variable
- <code>get_all_committed_values()</code> - Get all committed values</p>
<p><strong>Node Management:</strong>
- <code>set_simulation_active(node_id, bool)</code> - Set node as active/inactive in simulation
- <code>is_simulation_active(node_id)</code> - Check if node is active in simulation
- <code>get_failed_nodes()</code> - Get failed nodes (fault tolerant mode)
- <code>get_active_nodes()</code> - Get active nodes (fault tolerant mode)</p>
<p><strong>Monitoring and Debugging:</strong>
- <code>get_statistics()</code> - Get consensus statistics and counters
- <code>get_state_info()</code> - Get detailed state information
- <code>get_active_nodes_info()</code> - Get detailed active node information (fault tolerant mode)</p>
<h3 id="method-usage-examples">Method Usage Examples</h3>
<div class="language-python highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">handle_telemetry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">telemetry</span><span class="p">:</span> <span class="n">Telemetry</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>    <span class="c1"># Check if we&#39;re the leader before proposing</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">is_leader</span><span class="p">():</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>        <span class="c1"># Propose new values</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>        <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">propose_value</span><span class="p">(</span><span class="s2">&quot;sequence&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">telemetry</span><span class="o">.</span><span class="n">simulation_time</span><span class="p">))</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>        <span class="k">if</span> <span class="n">success</span><span class="p">:</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✅ Value proposed successfully&quot;</span><span class="p">)</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;❌ Failed to propose value&quot;</span><span class="p">)</span>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a>
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>        <span class="c1"># Propose multiple values</span>
</span><span id="__span-20-12"><a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">propose_value</span><span class="p">(</span><span class="s2">&quot;leader_position&quot;</span><span class="p">,</span> <span class="s2">&quot;north&quot;</span><span class="p">)</span>
</span><span id="__span-20-13"><a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">propose_value</span><span class="p">(</span><span class="s2">&quot;temperature&quot;</span><span class="p">,</span> <span class="mf">25.5</span><span class="p">)</span>
</span><span id="__span-20-14"><a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a>
</span><span id="__span-20-15"><a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a>    <span class="c1"># All nodes can retrieve committed values</span>
</span><span id="__span-20-16"><a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a>    <span class="n">sequence_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">get_committed_value</span><span class="p">(</span><span class="s2">&quot;sequence&quot;</span><span class="p">)</span>
</span><span id="__span-20-17"><a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a>    <span class="n">position_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">get_committed_value</span><span class="p">(</span><span class="s2">&quot;leader_position&quot;</span><span class="p">)</span>
</span><span id="__span-20-18"><a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a>
</span><span id="__span-20-19"><a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a>    <span class="k">if</span> <span class="n">sequence_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-20-20"><a id="__codelineno-20-20" name="__codelineno-20-20" href="#__codelineno-20-20"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current sequence: </span><span class="si">{</span><span class="n">sequence_value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-20-21"><a id="__codelineno-20-21" name="__codelineno-20-21" href="#__codelineno-20-21"></a>
</span><span id="__span-20-22"><a id="__codelineno-20-22" name="__codelineno-20-22" href="#__codelineno-20-22"></a>    <span class="c1"># Get all committed values</span>
</span><span id="__span-20-23"><a id="__codelineno-20-23" name="__codelineno-20-23" href="#__codelineno-20-23"></a>    <span class="n">all_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">get_all_committed_values</span><span class="p">()</span>
</span><span id="__span-20-24"><a id="__codelineno-20-24" name="__codelineno-20-24" href="#__codelineno-20-24"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;All committed values: </span><span class="si">{</span><span class="n">all_values</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-20-25"><a id="__codelineno-20-25" name="__codelineno-20-25" href="#__codelineno-20-25"></a>
</span><span id="__span-20-26"><a id="__codelineno-20-26" name="__codelineno-20-26" href="#__codelineno-20-26"></a>    <span class="c1"># Check consensus state</span>
</span><span id="__span-20-27"><a id="__codelineno-20-27" name="__codelineno-20-27" href="#__codelineno-20-27"></a>    <span class="n">is_leader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">is_leader</span><span class="p">()</span>
</span><span id="__span-20-28"><a id="__codelineno-20-28" name="__codelineno-20-28" href="#__codelineno-20-28"></a>    <span class="n">leader_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">get_leader_id</span><span class="p">()</span>
</span><span id="__span-20-29"><a id="__codelineno-20-29" name="__codelineno-20-29" href="#__codelineno-20-29"></a>    <span class="n">current_term</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">get_current_term</span><span class="p">()</span>
</span><span id="__span-20-30"><a id="__codelineno-20-30" name="__codelineno-20-30" href="#__codelineno-20-30"></a>
</span><span id="__span-20-31"><a id="__codelineno-20-31" name="__codelineno-20-31" href="#__codelineno-20-31"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Leader: </span><span class="si">{</span><span class="n">is_leader</span><span class="si">}</span><span class="s2">, Leader ID: </span><span class="si">{</span><span class="n">leader_id</span><span class="si">}</span><span class="s2">, Term: </span><span class="si">{</span><span class="n">current_term</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="active-node-information-fault-tolerant-mode">Active Node Information (Fault-Tolerant Mode)</h3>
<div class="language-python highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">handle_telemetry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">telemetry</span><span class="p">:</span> <span class="n">Telemetry</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>    <span class="c1"># Get detailed information about active nodes</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>    <span class="n">active_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">get_active_nodes_info</span><span class="p">()</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Active nodes: </span><span class="si">{</span><span class="n">active_info</span><span class="p">[</span><span class="s1">&#39;active_nodes&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total nodes: </span><span class="si">{</span><span class="n">active_info</span><span class="p">[</span><span class="s1">&#39;total_known&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed nodes: </span><span class="si">{</span><span class="n">active_info</span><span class="p">[</span><span class="s1">&#39;failed_nodes&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-21-8"><a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Has majority: </span><span class="si">{</span><span class="n">active_info</span><span class="p">[</span><span class="s1">&#39;has_majority&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-21-9"><a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Detection method: </span><span class="si">{</span><span class="n">active_info</span><span class="p">[</span><span class="s1">&#39;detection_method&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-21-10"><a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a>
</span><span id="__span-21-11"><a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a>    <span class="c1"># Check if we have quorum</span>
</span><span id="__span-21-12"><a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">has_quorum</span><span class="p">():</span>
</span><span id="__span-21-13"><a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✅ Cluster has quorum&quot;</span><span class="p">)</span>
</span><span id="__span-21-14"><a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-21-15"><a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;❌ Cluster lacks quorum&quot;</span><span class="p">)</span>
</span><span id="__span-21-16"><a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a>
</span><span id="__span-21-17"><a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a>    <span class="c1"># Check specific nodes</span>
</span><span id="__span-21-18"><a id="__codelineno-21-18" name="__codelineno-21-18" href="#__codelineno-21-18"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">is_node_failed</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
</span><span id="__span-21-19"><a id="__codelineno-21-19" name="__codelineno-21-19" href="#__codelineno-21-19"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Node 3 is currently failed&quot;</span><span class="p">)</span>
</span><span id="__span-21-20"><a id="__codelineno-21-20" name="__codelineno-21-20" href="#__codelineno-21-20"></a>
</span><span id="__span-21-21"><a id="__codelineno-21-21" name="__codelineno-21-21" href="#__codelineno-21-21"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">is_simulation_active</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
</span><span id="__span-21-22"><a id="__codelineno-21-22" name="__codelineno-21-22" href="#__codelineno-21-22"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Node 5 is active in simulation&quot;</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="node-failure-simulation">Node Failure Simulation</h3>
<div class="language-python highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">handle_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timer</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>    <span class="k">if</span> <span class="n">timer</span> <span class="o">==</span> <span class="s2">&quot;failure_simulation&quot;</span><span class="p">:</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>        <span class="c1"># Simulate failure of specific nodes</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>        <span class="n">nodes_to_fail</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>        <span class="k">for</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="n">nodes_to_fail</span><span class="p">:</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">set_simulation_active</span><span class="p">(</span><span class="n">node_id</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Simulated failure of nodes: </span><span class="si">{</span><span class="n">nodes_to_fail</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>    <span class="k">elif</span> <span class="n">timer</span> <span class="o">==</span> <span class="s2">&quot;recovery_simulation&quot;</span><span class="p">:</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a>        <span class="c1"># Simulate recovery of specific nodes</span>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a>        <span class="n">nodes_to_recover</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a>        <span class="k">for</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="n">nodes_to_recover</span><span class="p">:</span>
</span><span id="__span-22-13"><a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">set_simulation_active</span><span class="p">(</span><span class="n">node_id</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="__span-22-14"><a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Simulated recovery of nodes: </span><span class="si">{</span><span class="n">nodes_to_recover</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-22-15"><a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a>
</span><span id="__span-22-16"><a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a>    <span class="c1"># Forward other timers to consensus</span>
</span><span id="__span-22-17"><a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="p">:</span>
</span><span id="__span-22-18"><a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">handle_timer</span><span class="p">(</span><span class="n">timer</span><span class="p">)</span>
</span></code></pre></div>
<p>Always stop the plugin with <code>consensus.stop()</code> during <code>finish()</code> to clean up timers.</p>
<h2 id="running-the-showcase">Running the Showcase</h2>
<p>The repository ships with a ready-to-run demonstration under <code>showcases/raft</code>. It sets up 40 nodes and exercises failure and recovery flows.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>python<span class="w"> </span>-m<span class="w"> </span>showcases.raft.main
</span></code></pre></div>
<p>This command loads <code>showcases/raft/protocol.py</code>, which already uses <code>RaftConsensusPlugin</code> directly. Monitor the console output to track leadership changes, proposed values, and simulated failures.</p>
<h2 id="best-practices">Best Practices</h2>
<h3 id="configuration-guidelines">Configuration Guidelines</h3>
<h4 id="election-timeouts"><strong>Election Timeouts</strong></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="c1"># For stable networks</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="n">config</span><span class="o">.</span><span class="n">set_election_timeout</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>    <span class="c1"># 150-300ms</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="c1"># For unstable networks</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="n">config</span><span class="o">.</span><span class="n">set_election_timeout</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span>    <span class="c1"># 200-400ms</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="c1"># For very unstable networks</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="n">config</span><span class="o">.</span><span class="n">set_election_timeout</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">600</span><span class="p">)</span>    <span class="c1"># 300-600ms</span>
</span></code></pre></div>
<h4 id="heartbeat-intervals"><strong>Heartbeat Intervals</strong></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="c1"># Standard interval</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="n">config</span><span class="o">.</span><span class="n">set_heartbeat_interval</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>        <span class="c1"># 50ms</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="c1"># For high-frequency updates</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="n">config</span><span class="o">.</span><span class="n">set_heartbeat_interval</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>        <span class="c1"># 25ms</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="c1"># For low-frequency updates</span>
</span><span id="__span-25-8"><a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a><span class="n">config</span><span class="o">.</span><span class="n">set_heartbeat_interval</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>       <span class="c1"># 100ms</span>
</span></code></pre></div>
<h4 id="failure-detection-configuration"><strong>Failure Detection Configuration</strong></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="c1"># Conservative Detection (High reliability, slower detection)</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="n">failure_config</span><span class="o">.</span><span class="n">set_failure_threshold</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>      <span class="c1"># 5 consecutive failures</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="n">failure_config</span><span class="o">.</span><span class="n">set_recovery_threshold</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     <span class="c1"># 3 consecutive successes</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="n">failure_config</span><span class="o">.</span><span class="n">set_detection_interval</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     <span class="c1"># Check every 3 heartbeats</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="n">failure_config</span><span class="o">.</span><span class="n">set_heartbeat_timeout</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>      <span class="c1"># 6× heartbeat_interval = 300ms timeout</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="c1"># Aggressive Detection (Fast detection, may have false positives)</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a><span class="n">failure_config</span><span class="o">.</span><span class="n">set_failure_threshold</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>      <span class="c1"># 2 consecutive failures</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a><span class="n">failure_config</span><span class="o">.</span><span class="n">set_recovery_threshold</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>     <span class="c1"># 1 consecutive success</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="n">failure_config</span><span class="o">.</span><span class="n">set_detection_interval</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>     <span class="c1"># Check every heartbeat</span>
</span><span id="__span-26-11"><a id="__codelineno-26-11" name="__codelineno-26-11" href="#__codelineno-26-11"></a><span class="n">failure_config</span><span class="o">.</span><span class="n">set_absolute_timeout</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>     <span class="c1"># 100ms absolute timeout</span>
</span><span id="__span-26-12"><a id="__codelineno-26-12" name="__codelineno-26-12" href="#__codelineno-26-12"></a>
</span><span id="__span-26-13"><a id="__codelineno-26-13" name="__codelineno-26-13" href="#__codelineno-26-13"></a><span class="c1"># Balanced Detection (Recommended default)</span>
</span><span id="__span-26-14"><a id="__codelineno-26-14" name="__codelineno-26-14" href="#__codelineno-26-14"></a><span class="n">failure_config</span><span class="o">.</span><span class="n">set_failure_threshold</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>      <span class="c1"># 3 consecutive failures</span>
</span><span id="__span-26-15"><a id="__codelineno-26-15" name="__codelineno-26-15" href="#__codelineno-26-15"></a><span class="n">failure_config</span><span class="o">.</span><span class="n">set_recovery_threshold</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>     <span class="c1"># 2 consecutive successes</span>
</span><span id="__span-26-16"><a id="__codelineno-26-16" name="__codelineno-26-16" href="#__codelineno-26-16"></a><span class="n">failure_config</span><span class="o">.</span><span class="n">set_detection_interval</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>     <span class="c1"># Check every 2 heartbeats</span>
</span><span id="__span-26-17"><a id="__codelineno-26-17" name="__codelineno-26-17" href="#__codelineno-26-17"></a><span class="n">failure_config</span><span class="o">.</span><span class="n">set_heartbeat_timeout</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>      <span class="c1"># 4× heartbeat_interval = 200ms timeout</span>
</span></code></pre></div>
<h3 id="mode-selection">Mode Selection</h3>
<h4 id="use-classic-mode-when"><strong>Use Classic Mode When:</strong></h4>
<ul>
<li>Cluster size is fixed and known</li>
<li>Performance is critical</li>
<li>Standard Raft behavior is required</li>
<li>Manual failure management is acceptable</li>
</ul>
<h4 id="use-fault-tolerant-mode-when"><strong>Use Fault-Tolerant Mode When:</strong></h4>
<ul>
<li>Nodes may fail unexpectedly</li>
<li>Automatic fault recovery is needed</li>
<li>Cluster size varies dynamically</li>
<li>High availability is required</li>
<li>Active node information is needed</li>
</ul>
<h3 id="error-handling">Error Handling</h3>
<div class="language-python highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="c1"># Always check if consensus is ready</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">is_ready</span><span class="p">():</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>    <span class="c1"># Proceed with operations</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>    <span class="k">pass</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a><span class="c1"># Handle leader-only operations</span>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a><span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">is_leader</span><span class="p">():</span>
</span><span id="__span-27-8"><a id="__codelineno-27-8" name="__codelineno-27-8" href="#__codelineno-27-8"></a>    <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">propose_value</span><span class="p">(</span><span class="s2">&quot;var&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</span><span id="__span-27-9"><a id="__codelineno-27-9" name="__codelineno-27-9" href="#__codelineno-27-9"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">success</span><span class="p">:</span>
</span><span id="__span-27-10"><a id="__codelineno-27-10" name="__codelineno-27-10" href="#__codelineno-27-10"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Failed to propose value&quot;</span><span class="p">)</span>
</span><span id="__span-27-11"><a id="__codelineno-27-11" name="__codelineno-27-11" href="#__codelineno-27-11"></a>
</span><span id="__span-27-12"><a id="__codelineno-27-12" name="__codelineno-27-12" href="#__codelineno-27-12"></a><span class="c1"># Check quorum before critical operations</span>
</span><span id="__span-27-13"><a id="__codelineno-27-13" name="__codelineno-27-13" href="#__codelineno-27-13"></a><span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">has_quorum</span><span class="p">():</span>
</span><span id="__span-27-14"><a id="__codelineno-27-14" name="__codelineno-27-14" href="#__codelineno-27-14"></a>    <span class="c1"># Proceed with critical operation</span>
</span><span id="__span-27-15"><a id="__codelineno-27-15" name="__codelineno-27-15" href="#__codelineno-27-15"></a>    <span class="k">pass</span>
</span><span id="__span-27-16"><a id="__codelineno-27-16" name="__codelineno-27-16" href="#__codelineno-27-16"></a><span class="k">else</span><span class="p">:</span>
</span><span id="__span-27-17"><a id="__codelineno-27-17" name="__codelineno-27-17" href="#__codelineno-27-17"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No quorum available&quot;</span><span class="p">)</span>
</span></code></pre></div>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="common-issues">Common Issues</h3>
<h4 id="1-no-leader-elected"><strong>1. No Leader Elected</strong></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="c1"># Check if nodes are properly configured</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Known nodes: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">get_known_nodes</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Active nodes: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">get_active_nodes</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="c1"># Check if cluster has quorum</span>
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">has_quorum</span><span class="p">():</span>
</span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Cluster has quorum&quot;</span><span class="p">)</span>
</span><span id="__span-28-8"><a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a><span class="k">else</span><span class="p">:</span>
</span><span id="__span-28-9"><a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Cluster lacks quorum - add more nodes&quot;</span><span class="p">)</span>
</span></code></pre></div>
<h4 id="2-values-not-committing"><strong>2. Values Not Committing</strong></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="c1"># Check if we&#39;re the leader</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">is_leader</span><span class="p">():</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Not the leader - cannot propose values&quot;</span><span class="p">)</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="c1"># Check if we have quorum</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">has_quorum</span><span class="p">():</span>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No quorum - cannot commit values&quot;</span><span class="p">)</span>
</span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a>
</span><span id="__span-29-9"><a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a><span class="c1"># Check consensus variables</span>
</span><span id="__span-29-10"><a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a><span class="n">variables</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">get_consensus_variables</span><span class="p">()</span>
</span><span id="__span-29-11"><a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Available variables: </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">variables</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
<h4 id="3-high-election-frequency"><strong>3. High Election Frequency</strong></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="c1"># Increase election timeout</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="n">config</span><span class="o">.</span><span class="n">set_election_timeout</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">600</span><span class="p">)</span>    <span class="c1"># Longer timeouts</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="c1"># Increase heartbeat frequency</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="n">config</span><span class="o">.</span><span class="n">set_heartbeat_interval</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>       <span class="c1"># More frequent heartbeats</span>
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a><span class="c1"># Check network stability</span>
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a><span class="n">failed_nodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">get_failed_nodes</span><span class="p">()</span>
</span><span id="__span-30-9"><a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed nodes: </span><span class="si">{</span><span class="n">failed_nodes</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="known-issue-fault-tolerance-communication-range">⚠️ Known Issue: Fault Tolerance Communication Range</h3>
<p><strong>Important Warning</strong>: When the RAFT plugin is operating in <strong>Fault-Tolerant Mode</strong> (<code>RaftMode.FAULT_TOLERANT</code>) and the communication range is not large enough to reach all nodes in the swarm, the system may not converge to stability and consecutive elections may be triggered repeatedly.</p>
<p><strong>Problem Description:</strong>
- In Fault-Tolerant mode, nodes perform active node discovery before elections
- When communication range is limited, the network may form multiple disconnected clusters
- <strong>Edge nodes</strong> that can be reached by multiple clusters simultaneously become a critical issue
- These edge nodes may receive conflicting election requests from different clusters
- This leads to incorrect majority calculations and failed leader elections
- The system may enter a cycle of repeated elections without reaching consensus
- <strong>Most likely cause</strong>: Edge nodes being simultaneously accessible by multiple clusters, creating conflicting consensus states</p>
<p><strong>Current Status:</strong>
This is an <strong>open research problem</strong> for which a complete solution is not yet known. The issue occurs in distributed systems where:
- Nodes have limited communication range
- The network topology creates disconnected components
- The consensus algorithm requires global knowledge for proper operation</p>
<p><strong>Impact:</strong>
- ❌ System may not converge to a stable leader
- ❌ Consecutive election cycles may occur
- ❌ Consensus values may not be committed
- ❌ Performance degradation due to constant re-elections</p>
<p><strong>Workarounds:</strong>
1. <strong>Increase Communication Range</strong>: Ensure all nodes can communicate with each other
2. <strong>Use Classic Mode</strong>: Switch to <code>RaftMode.CLASSIC</code> for scenarios with limited communication range
3. <strong>Network Topology Design</strong>: Design network topology to ensure full connectivity</p>
<p><strong>Call for Contributions:</strong>
This remains an <strong>open research challenge</strong> in distributed consensus algorithms. We invite researchers and developers to:</p>
<ul>
<li><strong>Research Solutions</strong>: Investigate novel approaches to consensus in limited-range networks</li>
<li><strong>Propose Algorithms</strong>: Develop new consensus algorithms for disconnected networks</li>
<li><strong>Test Scenarios</strong>: Create test cases and benchmarks for this problem</li>
<li><strong>Document Solutions</strong>: Share findings and potential solutions</li>
<li><strong>Collaborate</strong>: Work together to find a robust solution</li>
</ul>
<p><strong>Contact for Contributions:</strong>
If you have ideas, solutions, or want to contribute to solving this problem, please contact:
- <strong>Email</strong>: <a href="mailto:llucchesi@inf.puc-rio.br">llucchesi@inf.puc-rio.br</a>
- <strong>Subject</strong>: "RAFT Plugin - Fault Tolerance Communication Range Issue"</p>
<h3 id="debugging-tips">Debugging Tips</h3>
<h4 id="enable-logging"><strong>Enable Logging</strong></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="n">config</span> <span class="o">=</span> <span class="n">RaftConfig</span><span class="p">()</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="n">config</span><span class="o">.</span><span class="n">set_logging</span><span class="p">(</span><span class="n">enable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">&quot;DEBUG&quot;</span><span class="p">)</span>
</span></code></pre></div>
<h4 id="monitor-node-states"><strong>Monitor Node States</strong></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="c1"># Get detailed state information</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="n">state_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">get_state_info</span><span class="p">()</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current state: </span><span class="si">{</span><span class="n">state_info</span><span class="p">[</span><span class="s1">&#39;state&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current term: </span><span class="si">{</span><span class="n">state_info</span><span class="p">[</span><span class="s1">&#39;current_term&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Leader ID: </span><span class="si">{</span><span class="n">state_info</span><span class="p">[</span><span class="s1">&#39;leader_id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
<h4 id="check-network-connectivity"><strong>Check Network Connectivity</strong></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="c1"># In fault-tolerant mode, check active nodes</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="n">active_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">get_active_nodes_info</span><span class="p">()</span>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Active nodes: </span><span class="si">{</span><span class="n">active_info</span><span class="p">[</span><span class="s1">&#39;active_nodes&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed nodes: </span><span class="si">{</span><span class="n">active_info</span><span class="p">[</span><span class="s1">&#39;failed_nodes&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a><span class="c1"># Check majority calculation</span>
</span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a><span class="n">majority_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">get_majority_info</span><span class="p">()</span>
</span><span id="__span-33-8"><a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Majority needed: </span><span class="si">{</span><span class="n">majority_info</span><span class="p">[</span><span class="s1">&#39;majority_needed&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-33-9"><a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Has majority: </span><span class="si">{</span><span class="n">majority_info</span><span class="p">[</span><span class="s1">&#39;has_majority&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="performance-monitoring">Performance Monitoring</h3>
<div class="language-python highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="c1"># Get consensus statistics</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="n">stats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">get_statistics</span><span class="p">()</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Proposals made: </span><span class="si">{</span><span class="n">stats</span><span class="p">[</span><span class="s1">&#39;proposals_made&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Values committed: </span><span class="si">{</span><span class="n">stats</span><span class="p">[</span><span class="s1">&#39;values_committed&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Election attempts: </span><span class="si">{</span><span class="n">stats</span><span class="p">[</span><span class="s1">&#39;election_attempts&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a>
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a><span class="c1"># Get failure detection metrics</span>
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a><span class="n">metrics</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">get_failure_detection_metrics</span><span class="p">()</span>
</span><span id="__span-34-9"><a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Detection latency: </span><span class="si">{</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;detection_latency_ms&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">ms&quot;</span><span class="p">)</span>
</span><span id="__span-34-10"><a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Success rate: </span><span class="si">{</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;success_rate_percent&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
</span></code></pre></div>
<h2 id="api-quick-reference">API Quick Reference</h2>
<p>This section provides a comprehensive reference of all available methods in the RAFT consensus plugin, organized by functionality.</p>
<h3 id="configuration-methods"><strong>Configuration Methods</strong></h3>
<p><strong>Import Required:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">gradysim.protocol.plugin.raft</span><span class="w"> </span><span class="kn">import</span> <span class="n">RaftConfig</span><span class="p">,</span> <span class="n">RaftMode</span>
</span></code></pre></div></p>
<h4 id="raftconfig-methods"><strong>RaftConfig Methods</strong></h4>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>set_election_timeout(min_ms, max_ms)</code></td>
<td>Set randomized election timeout range</td>
<td><code>config.set_election_timeout(150, 300)</code></td>
</tr>
<tr>
<td><code>set_heartbeat_interval(ms)</code></td>
<td>Set leader heartbeat interval</td>
<td><code>config.set_heartbeat_interval(50)</code></td>
</tr>
<tr>
<td><code>add_consensus_variable(name, type)</code></td>
<td>Add a consensus variable</td>
<td><code>config.add_consensus_variable("sequence", int)</code></td>
</tr>
<tr>
<td><code>set_logging(enable, level)</code></td>
<td>Configure logging</td>
<td><code>config.set_logging(True, "INFO")</code></td>
</tr>
<tr>
<td><code>set_raft_mode(mode)</code></td>
<td>Set operation mode</td>
<td><code>config.set_raft_mode(RaftMode.FAULT_TOLERANT)</code></td>
</tr>
<tr>
<td><code>get_failure_config()</code></td>
<td>Get failure detection config</td>
<td><code>failure = config.get_failure_config()</code></td>
</tr>
</tbody>
</table>
<h3 id="lifecycle-methods"><strong>Lifecycle Methods</strong></h3>
<p><strong>Import Required:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">gradysim.protocol.plugin.raft</span><span class="w"> </span><span class="kn">import</span> <span class="n">RaftConsensusPlugin</span>
</span></code></pre></div></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>start()</code></td>
<td>Start consensus process</td>
<td><code>consensus.start()</code></td>
</tr>
<tr>
<td><code>stop()</code></td>
<td>Stop consensus process</td>
<td><code>consensus.stop()</code></td>
</tr>
<tr>
<td><code>is_ready()</code></td>
<td>Check if system is ready</td>
<td><code>if consensus.is_ready():</code></td>
</tr>
</tbody>
</table>
<h3 id="leadership-and-state-methods"><strong>Leadership and State Methods</strong></h3>
<p><strong>Import Required:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">gradysim.protocol.plugin.raft</span><span class="w"> </span><span class="kn">import</span> <span class="n">RaftConsensusPlugin</span><span class="p">,</span> <span class="n">RaftState</span>
</span></code></pre></div></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>is_leader()</code></td>
<td>Check if this node is leader</td>
<td><code>if consensus.is_leader():</code></td>
</tr>
<tr>
<td><code>get_leader_id()</code></td>
<td>Get current leader ID</td>
<td><code>leader_id = consensus.get_leader_id()</code></td>
</tr>
<tr>
<td><code>get_current_state()</code></td>
<td>Get current Raft state</td>
<td><code>state = consensus.get_current_state()</code></td>
</tr>
<tr>
<td><code>get_current_term()</code></td>
<td>Get current term number</td>
<td><code>term = consensus.get_current_term()</code></td>
</tr>
</tbody>
</table>
<h3 id="value-management-methods"><strong>Value Management Methods</strong></h3>
<p><strong>Import Required:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">gradysim.protocol.plugin.raft</span><span class="w"> </span><span class="kn">import</span> <span class="n">RaftConsensusPlugin</span>
</span></code></pre></div></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>propose_value(name, value)</code></td>
<td>Propose new value (leader only)</td>
<td><code>consensus.propose_value("sequence", 42)</code></td>
</tr>
<tr>
<td><code>get_committed_value(name)</code></td>
<td>Get committed value</td>
<td><code>value = consensus.get_committed_value("sequence")</code></td>
</tr>
<tr>
<td><code>get_all_committed_values()</code></td>
<td>Get all committed values</td>
<td><code>values = consensus.get_all_committed_values()</code></td>
</tr>
<tr>
<td><code>get_consensus_variables()</code></td>
<td>Get configured variables</td>
<td><code>vars = consensus.get_consensus_variables()</code></td>
</tr>
<tr>
<td><code>has_consensus_variable(name)</code></td>
<td>Check if variable exists</td>
<td><code>if consensus.has_consensus_variable("sequence"):</code></td>
</tr>
</tbody>
</table>
<h3 id="node-management-methods"><strong>Node Management Methods</strong></h3>
<p><strong>Import Required:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">gradysim.protocol.plugin.raft</span><span class="w"> </span><span class="kn">import</span> <span class="n">RaftConsensusPlugin</span>
</span></code></pre></div></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>set_known_nodes(node_ids)</code></td>
<td>Set known node IDs</td>
<td><code>consensus.set_known_nodes([1, 2, 3, 4, 5])</code></td>
</tr>
<tr>
<td><code>set_simulation_active(node_id, active)</code></td>
<td>Set node simulation state</td>
<td><code>consensus.set_simulation_active(1, False)</code></td>
</tr>
<tr>
<td><code>is_simulation_active(node_id)</code></td>
<td>Check if node is active</td>
<td><code>if consensus.is_simulation_active(1):</code></td>
</tr>
<tr>
<td><code>get_failed_nodes()</code></td>
<td>Get failed nodes</td>
<td><code>failed = consensus.get_failed_nodes()</code></td>
</tr>
<tr>
<td><code>get_active_nodes()</code></td>
<td>Get active nodes</td>
<td><code>active = consensus.get_active_nodes()</code></td>
</tr>
<tr>
<td><code>is_node_failed(node_id)</code></td>
<td>Check if node failed</td>
<td><code>if consensus.is_node_failed(1):</code></td>
</tr>
</tbody>
</table>
<h3 id="active-node-information-methods-fault-tolerant-mode"><strong>Active Node Information Methods (Fault-Tolerant Mode)</strong></h3>
<p><strong>Import Required:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">gradysim.protocol.plugin.raft</span><span class="w"> </span><span class="kn">import</span> <span class="n">RaftConsensusPlugin</span>
</span></code></pre></div></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>get_active_nodes_info()</code></td>
<td>Get detailed active node info</td>
<td><code>info = consensus.get_active_nodes_info()</code></td>
</tr>
<tr>
<td><code>get_communication_failed_nodes()</code></td>
<td>Get communication failed nodes</td>
<td><code>failed = consensus.get_communication_failed_nodes()</code></td>
</tr>
<tr>
<td><code>get_communication_active_nodes()</code></td>
<td>Get communication active nodes</td>
<td><code>active = consensus.get_communication_active_nodes()</code></td>
</tr>
<tr>
<td><code>is_communication_failed(node_id)</code></td>
<td>Check communication failure</td>
<td><code>if consensus.is_communication_failed(1):</code></td>
</tr>
</tbody>
</table>
<h3 id="quorum-and-majority-methods"><strong>Quorum and Majority Methods</strong></h3>
<p><strong>Import Required:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">gradysim.protocol.plugin.raft</span><span class="w"> </span><span class="kn">import</span> <span class="n">RaftConsensusPlugin</span>
</span></code></pre></div></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>has_quorum()</code></td>
<td>Check if cluster has quorum</td>
<td><code>if consensus.has_quorum():</code></td>
</tr>
<tr>
<td><code>has_majority_votes()</code></td>
<td>Check if has majority votes</td>
<td><code>if consensus.has_majority_votes():</code></td>
</tr>
<tr>
<td><code>has_majority_confirmation()</code></td>
<td>Check majority confirmation</td>
<td><code>if consensus.has_majority_confirmation():</code></td>
</tr>
<tr>
<td><code>get_majority_info()</code></td>
<td>Get majority information</td>
<td><code>info = consensus.get_majority_info()</code></td>
</tr>
</tbody>
</table>
<h3 id="monitoring-and-debugging-methods"><strong>Monitoring and Debugging Methods</strong></h3>
<p><strong>Import Required:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">gradysim.protocol.plugin.raft</span><span class="w"> </span><span class="kn">import</span> <span class="n">RaftConsensusPlugin</span>
</span></code></pre></div></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>get_statistics()</code></td>
<td>Get consensus statistics</td>
<td><code>stats = consensus.get_statistics()</code></td>
</tr>
<tr>
<td><code>get_state_info()</code></td>
<td>Get detailed state info</td>
<td><code>info = consensus.get_state_info()</code></td>
</tr>
<tr>
<td><code>get_configuration()</code></td>
<td>Get current configuration</td>
<td><code>config = consensus.get_configuration()</code></td>
</tr>
<tr>
<td><code>get_failure_detection_metrics()</code></td>
<td>Get failure detection metrics</td>
<td><code>metrics = consensus.get_failure_detection_metrics()</code></td>
</tr>
</tbody>
</table>
<h3 id="cluster-management-methods"><strong>Cluster Management Methods</strong></h3>
<p><strong>Import Required:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">gradysim.protocol.plugin.raft</span><span class="w"> </span><span class="kn">import</span> <span class="n">RaftConsensusPlugin</span>
</span></code></pre></div></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>set_cluster_id(cluster_id)</code></td>
<td>Set cluster ID</td>
<td><code>consensus.set_cluster_id(1)</code></td>
</tr>
<tr>
<td><code>get_cluster_id()</code></td>
<td>Get cluster ID</td>
<td><code>id = consensus.get_cluster_id()</code></td>
</tr>
<tr>
<td><code>is_in_same_cluster(node_id)</code></td>
<td>Check if in same cluster</td>
<td><code>if consensus.is_in_same_cluster(2):</code></td>
</tr>
</tbody>
</table>
<h3 id="complete-usage-example"><strong>Complete Usage Example</strong></h3>
<div class="language-python highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">gradysim.protocol.plugin.raft</span><span class="w"> </span><span class="kn">import</span> <span class="n">RaftConfig</span><span class="p">,</span> <span class="n">RaftMode</span><span class="p">,</span> <span class="n">RaftConsensusPlugin</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a><span class="k">class</span><span class="w"> </span><span class="nc">RaftProtocol</span><span class="p">(</span><span class="n">IProtocol</span><span class="p">):</span>
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-44-5"><a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a>        <span class="c1"># Configuration</span>
</span><span id="__span-44-6"><a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a>        <span class="n">config</span> <span class="o">=</span> <span class="n">RaftConfig</span><span class="p">()</span>
</span><span id="__span-44-7"><a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a>        <span class="n">config</span><span class="o">.</span><span class="n">set_election_timeout</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
</span><span id="__span-44-8"><a id="__codelineno-44-8" name="__codelineno-44-8" href="#__codelineno-44-8"></a>        <span class="n">config</span><span class="o">.</span><span class="n">set_heartbeat_interval</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
</span><span id="__span-44-9"><a id="__codelineno-44-9" name="__codelineno-44-9" href="#__codelineno-44-9"></a>        <span class="n">config</span><span class="o">.</span><span class="n">add_consensus_variable</span><span class="p">(</span><span class="s2">&quot;sequence&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
</span><span id="__span-44-10"><a id="__codelineno-44-10" name="__codelineno-44-10" href="#__codelineno-44-10"></a>        <span class="n">config</span><span class="o">.</span><span class="n">set_logging</span><span class="p">(</span><span class="n">enable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">&quot;INFO&quot;</span><span class="p">)</span>
</span><span id="__span-44-11"><a id="__codelineno-44-11" name="__codelineno-44-11" href="#__codelineno-44-11"></a>        <span class="n">config</span><span class="o">.</span><span class="n">set_raft_mode</span><span class="p">(</span><span class="n">RaftMode</span><span class="o">.</span><span class="n">FAULT_TOLERANT</span><span class="p">)</span>
</span><span id="__span-44-12"><a id="__codelineno-44-12" name="__codelineno-44-12" href="#__codelineno-44-12"></a>
</span><span id="__span-44-13"><a id="__codelineno-44-13" name="__codelineno-44-13" href="#__codelineno-44-13"></a>        <span class="c1"># Initialize consensus</span>
</span><span id="__span-44-14"><a id="__codelineno-44-14" name="__codelineno-44-14" href="#__codelineno-44-14"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span> <span class="o">=</span> <span class="n">RaftConsensusPlugin</span><span class="p">(</span><span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">protocol</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
</span><span id="__span-44-15"><a id="__codelineno-44-15" name="__codelineno-44-15" href="#__codelineno-44-15"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">set_known_nodes</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)))</span>
</span><span id="__span-44-16"><a id="__codelineno-44-16" name="__codelineno-44-16" href="#__codelineno-44-16"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span id="__span-44-17"><a id="__codelineno-44-17" name="__codelineno-44-17" href="#__codelineno-44-17"></a>
</span><span id="__span-44-18"><a id="__codelineno-44-18" name="__codelineno-44-18" href="#__codelineno-44-18"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">handle_telemetry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">telemetry</span><span class="p">:</span> <span class="n">Telemetry</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-44-19"><a id="__codelineno-44-19" name="__codelineno-44-19" href="#__codelineno-44-19"></a>        <span class="c1"># Leadership and value management</span>
</span><span id="__span-44-20"><a id="__codelineno-44-20" name="__codelineno-44-20" href="#__codelineno-44-20"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">is_leader</span><span class="p">():</span>
</span><span id="__span-44-21"><a id="__codelineno-44-21" name="__codelineno-44-21" href="#__codelineno-44-21"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">propose_value</span><span class="p">(</span><span class="s2">&quot;sequence&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">telemetry</span><span class="o">.</span><span class="n">simulation_time</span><span class="p">))</span>
</span><span id="__span-44-22"><a id="__codelineno-44-22" name="__codelineno-44-22" href="#__codelineno-44-22"></a>
</span><span id="__span-44-23"><a id="__codelineno-44-23" name="__codelineno-44-23" href="#__codelineno-44-23"></a>        <span class="c1"># Get committed values</span>
</span><span id="__span-44-24"><a id="__codelineno-44-24" name="__codelineno-44-24" href="#__codelineno-44-24"></a>        <span class="n">sequence</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">get_committed_value</span><span class="p">(</span><span class="s2">&quot;sequence&quot;</span><span class="p">)</span>
</span><span id="__span-44-25"><a id="__codelineno-44-25" name="__codelineno-44-25" href="#__codelineno-44-25"></a>        <span class="k">if</span> <span class="n">sequence</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-44-26"><a id="__codelineno-44-26" name="__codelineno-44-26" href="#__codelineno-44-26"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current sequence: </span><span class="si">{</span><span class="n">sequence</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-44-27"><a id="__codelineno-44-27" name="__codelineno-44-27" href="#__codelineno-44-27"></a>
</span><span id="__span-44-28"><a id="__codelineno-44-28" name="__codelineno-44-28" href="#__codelineno-44-28"></a>        <span class="c1"># Check consensus state</span>
</span><span id="__span-44-29"><a id="__codelineno-44-29" name="__codelineno-44-29" href="#__codelineno-44-29"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">is_leader</span><span class="p">():</span>
</span><span id="__span-44-30"><a id="__codelineno-44-30" name="__codelineno-44-30" href="#__codelineno-44-30"></a>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">get_leader_id</span><span class="p">()</span><span class="si">}</span><span class="s2"> is leader in term </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">get_current_term</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-44-31"><a id="__codelineno-44-31" name="__codelineno-44-31" href="#__codelineno-44-31"></a>
</span><span id="__span-44-32"><a id="__codelineno-44-32" name="__codelineno-44-32" href="#__codelineno-44-32"></a>        <span class="c1"># Monitor active nodes (fault-tolerant mode)</span>
</span><span id="__span-44-33"><a id="__codelineno-44-33" name="__codelineno-44-33" href="#__codelineno-44-33"></a>        <span class="n">active_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">get_active_nodes_info</span><span class="p">()</span>
</span><span id="__span-44-34"><a id="__codelineno-44-34" name="__codelineno-44-34" href="#__codelineno-44-34"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Active nodes: </span><span class="si">{</span><span class="n">active_info</span><span class="p">[</span><span class="s1">&#39;active_nodes&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-44-35"><a id="__codelineno-44-35" name="__codelineno-44-35" href="#__codelineno-44-35"></a>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Has majority: </span><span class="si">{</span><span class="n">active_info</span><span class="p">[</span><span class="s1">&#39;has_majority&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-44-36"><a id="__codelineno-44-36" name="__codelineno-44-36" href="#__codelineno-44-36"></a>
</span><span id="__span-44-37"><a id="__codelineno-44-37" name="__codelineno-44-37" href="#__codelineno-44-37"></a>        <span class="c1"># Check quorum</span>
</span><span id="__span-44-38"><a id="__codelineno-44-38" name="__codelineno-44-38" href="#__codelineno-44-38"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">has_quorum</span><span class="p">():</span>
</span><span id="__span-44-39"><a id="__codelineno-44-39" name="__codelineno-44-39" href="#__codelineno-44-39"></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Warning: No quorum available&quot;</span><span class="p">)</span>
</span><span id="__span-44-40"><a id="__codelineno-44-40" name="__codelineno-44-40" href="#__codelineno-44-40"></a>
</span><span id="__span-44-41"><a id="__codelineno-44-41" name="__codelineno-44-41" href="#__codelineno-44-41"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">finish</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-44-42"><a id="__codelineno-44-42" name="__codelineno-44-42" href="#__codelineno-44-42"></a>        <span class="c1"># Always stop consensus</span>
</span><span id="__span-44-43"><a id="__codelineno-44-43" name="__codelineno-44-43" href="#__codelineno-44-43"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">consensus</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</span></code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../3_extending/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Extending the Simulation">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Extending the Simulation
              </div>
            </div>
          </a>
        
        
          
          <a href="../Prototype%20Mode/" class="md-footer__link md-footer__link--next" aria-label="Next: Introduction">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Introduction
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "navigation.footer", "navigation.instant"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>